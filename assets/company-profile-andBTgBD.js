import{m as k,j as e,u as M,a as F,b as T,r,D as B}from"./helpers-a_il61DA.js";function f(c){return c?c>=1e9?`$${(c/1e9).toFixed(1)}B`:c>=1e6?`$${(c/1e6).toFixed(1)}M`:`$${(c/1e3).toFixed(0)}K`:"—"}function g(c){return c?c.toLocaleString():"—"}const y=[{value:"angel",label:"Angel"},{value:"early_vc",label:"Early VC"},{value:"growth_vc",label:"Growth VC"},{value:"late_vc",label:"Late VC"},{value:"pe",label:"PE"},{value:"ib",label:"IB"}],w=[{value:"<50M",label:"<$50M"},{value:"50-250M",label:"$50-250M"},{value:"250M-1B",label:"$250M-1B"},{value:"1-5B",label:"$1-5B"},{value:"5B+",label:"$5B+"}];function E(){const{isSuccess:c,output:u,isPending:_,input:m}=M(),n=F(),l=T("analyze_deal"),[x,j]=r.useState(!1),[t,$]=r.useState("early_vc"),[d,S]=r.useState("50-250M"),[h,C]=r.useState(!1),i=u,s=i?.profile,v=i?.existing_deal_id,o=l.data?.structuredContent?.deal_id;if(r.useEffect(()=>{l.isSuccess&&!x&&o&&(j(!0),n(`Show the deal dashboard for deal_id="${o}".`))},[l.isSuccess,o,x]),_||!c||!u)return e.jsx("div",{className:"cp-card",children:e.jsxs("div",{className:"cp-loading",children:[e.jsx("span",{className:"cp-spinner"}),e.jsx("span",{className:"cp-loading-text",children:m?.domain?`Researching ${m.name||m.domain}...`:"Researching company..."})]})});if(!s)return e.jsxs("div",{className:"cp-card",children:[e.jsxs("div",{className:"cp-header",children:[e.jsx("div",{className:"cp-initials",children:(i?.name||"?").slice(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"cp-title",children:i?.name||"Unknown"}),e.jsx("div",{className:"cp-subtitle",children:"Company not found in Specter"})]})]}),e.jsx("button",{className:"cp-btn cp-btn-secondary",onClick:()=>n(`Search for ${i?.name||i?.domain} by name in Specter and show me the results so I can pick the correct one.`),children:"Search by Name"})]});const N=()=>{l.callTool({name:s.name,domain:s.domain,stage:s.growth_stage||"seed",geo:s.hq_country||"EU",firm_type:t,aum:d})};return e.jsx(B,{content:`Company: ${s.name}, Stage: ${s.growth_stage}, Funding: ${f(s.funding_total_usd)}, Employees: ${s.employee_count}, Fund: ${t} ${d}`,children:e.jsxs("div",{className:"cp-card",children:[e.jsxs("div",{className:"cp-header",children:[e.jsx("img",{className:"cp-avatar",src:s.logo_url||`https://icons.duckduckgo.com/ip3/${s.domain}.ico`,alt:s.name,onError:a=>{const p=a.currentTarget;p.style.display="none";const b=p.parentElement?.querySelector(".cp-initials");b&&(b.style.display="flex")}}),e.jsx("div",{className:"cp-initials",style:{display:"none"},children:(s.name||"?").slice(0,2).toUpperCase()}),e.jsxs("div",{className:"cp-header-text",children:[e.jsx("div",{className:"cp-title",children:s.domain?e.jsxs("a",{className:"cp-title-link",href:`https://www.${s.domain.replace(/^www\./i,"")}`,target:"_blank",rel:"noopener noreferrer",children:[s.name," ",e.jsx("span",{className:"cp-arrow",children:"↗"})]}):s.name}),e.jsxs("div",{className:"cp-subtitle",children:[s.domain,s.hq_city?` · ${s.hq_city}`:s.hq_country?` · ${s.hq_country}`:"",s.growth_stage?` · ${s.growth_stage}`:""]})]})]}),e.jsx("button",{className:"cp-wrong-link",onClick:()=>n(`That's not the right company. Search for "${s.name}" by name in Specter and show me the results so I can pick the correct one.`),children:"Not this company? Try a different domain"}),e.jsxs("div",{className:"cp-metrics",children:[e.jsxs("div",{className:"cp-metric",children:[e.jsx("span",{className:"cp-metric-value",children:f(s.funding_total_usd)}),e.jsx("span",{className:"cp-metric-label",children:"raised"})]}),e.jsx("div",{className:"cp-metric-divider"}),e.jsxs("div",{className:"cp-metric",children:[e.jsx("span",{className:"cp-metric-value",children:g(s.employee_count)}),e.jsx("span",{className:"cp-metric-label",children:"team"})]}),e.jsx("div",{className:"cp-metric-divider"}),e.jsxs("div",{className:"cp-metric",children:[e.jsx("span",{className:"cp-metric-value",children:g(s.web_monthly_visits)}),e.jsx("span",{className:"cp-metric-label",children:"/mo visits"})]}),s.founded_year&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"cp-metric-divider"}),e.jsxs("div",{className:"cp-metric",children:[e.jsx("span",{className:"cp-metric-value",children:s.founded_year}),e.jsx("span",{className:"cp-metric-label",children:"est."})]})]})]}),s.founders?.length>0&&e.jsxs("div",{className:"cp-founders",children:[s.founders.slice(0,3).map((a,p)=>e.jsxs("a",{className:"cp-founder-chip",href:`https://www.linkedin.com/search/results/people/?keywords=${encodeURIComponent(a+" "+(s.name||""))}`,target:"_blank",rel:"noopener noreferrer",children:[a," ↗"]},p)),s.founders.length>3&&e.jsxs("span",{className:"cp-founder-more",children:["+",s.founders.length-3]})]}),s.description&&e.jsx("div",{className:"cp-description",children:s.description.length>140?s.description.slice(0,140)+"...":s.description}),e.jsxs("div",{className:"cp-fund-section",children:[e.jsxs("button",{className:"cp-fund-toggle",onClick:()=>C(!h),children:[e.jsx("span",{className:"cp-fund-label",children:"Investor Lens"}),e.jsxs("span",{className:"cp-fund-summary",children:[y.find(a=>a.value===t)?.label," · ",w.find(a=>a.value===d)?.label]}),e.jsx("span",{className:`cp-chevron ${h?"open":""}`,children:"▾"})]}),h&&e.jsxs("div",{className:"cp-fund-config",children:[e.jsxs("div",{className:"cp-fund-row",children:[e.jsx("label",{className:"cp-fund-field-label",children:"Firm Type"}),e.jsx("div",{className:"cp-pill-group",children:y.map(a=>e.jsx("button",{className:`cp-pill ${t===a.value?"active":""}`,onClick:()=>$(a.value),children:a.label},a.value))})]}),e.jsxs("div",{className:"cp-fund-row",children:[e.jsx("label",{className:"cp-fund-field-label",children:"AUM"}),e.jsx("div",{className:"cp-pill-group",children:w.map(a=>e.jsx("button",{className:`cp-pill ${d===a.value?"active":""}`,onClick:()=>S(a.value),children:a.label},a.value))})]})]})]}),v?e.jsxs("div",{className:"cp-actions-row",children:[e.jsx("button",{className:"cp-btn cp-btn-primary",style:{whiteSpace:"nowrap"},onClick:()=>n(`Show the deal dashboard for deal_id="${v}".`),children:"Open Dashboard →"}),e.jsx("button",{className:"cp-btn cp-btn-ghost",onClick:()=>{j(!1),N()},children:"Re-run ↻"})]}):l.isPending?e.jsxs("div",{className:"cp-status",children:[e.jsx("span",{className:"cp-spinner"}),e.jsx("span",{children:"Creating deal & launching agents..."})]}):l.isSuccess?e.jsxs("div",{className:"cp-status cp-status-success",children:[e.jsx("span",{className:"cp-check",children:"✓"}),e.jsx("span",{children:"Analysis running"}),e.jsx("button",{className:"cp-btn cp-btn-primary cp-btn-sm",style:{whiteSpace:"nowrap"},onClick:()=>n(`Show the deal dashboard for deal_id="${o}".`),children:"Open Dashboard →"})]}):e.jsxs("div",{className:"cp-actions-row",children:[e.jsx("button",{className:"cp-btn cp-btn-primary",onClick:N,children:"Process Deal →"}),e.jsx("button",{className:"cp-btn cp-btn-ghost",onClick:()=>n(`Bench ${s.name} (${s.domain}) for later review.`),children:"Bench"})]})]})})}k(e.jsx(E,{}));
