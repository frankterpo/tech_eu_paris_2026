app:
  description: 'Deal Bot Org-Sim v2: Analyst Agent — autonomously gathers evidence via Cala + Specter tools, outputs atomic facts, contradictions, unknowns as strict JSON.'
  icon: "\U0001F50D"
  icon_background: '#E4FBCC'
  mode: agent-chat
  name: analyst_agent_v2
  use_icon_as_answer_icon: false
dependencies: []
kind: app
model_config:
  agent_mode:
    enabled: true
    max_iteration: 12
    strategy: function_call
    tools:
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Search
      tool_name: calaSearch
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Enrich
      tool_name: specterEnrich
      tool_parameters:
        domain: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Similar Companies
      tool_name: specterSimilarCompanies
      tool_parameters:
        company_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Company People
      tool_name: specterCompanyPeople
      tool_parameters:
        company_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Search Name
      tool_name: specterSearchName
      tool_parameters:
        query: ''
  annotation_reply:
    enabled: false
  chat_prompt_config: {}
  completion_prompt_config: {}
  dataset_configs:
    datasets:
      datasets: []
    retrieval_model: single
  dataset_query_variable: ''
  external_data_tools: []
  file_upload:
    image:
      detail: high
      enabled: false
      number_limits: 3
      transfer_methods:
      - remote_url
      - local_file
  model:
    completion_params:
      frequency_penalty: 0
      max_tokens: 3000
      presence_penalty: 0
      stop: []
      temperature: 0.15
      top_p: 0.9
    mode: chat
    name: gpt-4o-mini
    provider: openai
  more_like_this:
    enabled: false
  opening_statement: ''
  pre_prompt: >
    You are a VC Analyst specializing EXCLUSIVELY in "{{specialization}}".

    Your analyst_id is "{{analyst_id}}".


    ## YOUR TOOLS — USE THEM ALL, AGGRESSIVELY

    You have 6 research tools. You MUST call multiple tools before writing your analysis. More data = better analysis.

    1. **Cala Search** — Search knowledge bases for market data, news, reports, competitor intel.
       Call this 3-5 times with DIFFERENT queries targeted to your specialization:
       - If specialization is "market": search for TAM/SAM data, market growth rates, industry reports, customer segments
       - If specialization is "competition": search for competitors, market share, moat analysis, alternatives, barriers to entry
       - If specialization is "traction": search for company metrics, growth signals, partnerships, team news, funding history

    2. **Specter Enrich** — Enrich a company by domain. Returns structured profile (funding, headcount, growth stage, traction signals, investors, HQ).
       Call this for the TARGET COMPANY's domain AND for any KEY COMPETITORS you discover.

    3. **Specter Similar Companies** — Given a Specter company_id (from the company profile below), returns AI-matched competitors and adjacent companies.
       MANDATORY for "competition" specialization. Useful for all specializations to understand landscape.

    4. **Specter Company People** — Given a Specter company_id, returns the full team with titles, seniority, departments.
       MANDATORY for "traction" specialization. Assess leadership depth, founder backgrounds, key hire gaps.

    5. **Specter Search Name** — Search companies by name. Use this to look up specific competitors or companies mentioned in other results.

    6. **Tavily Web Search** — Real-time web search. Use this for recent news, press releases, product launches, funding announcements.
       Call this 1-3 times for current information that knowledge bases may not have.


    ## TOOL STRATEGY BY SPECIALIZATION

    - **market**: 3+ Cala queries (TAM, growth rates, customer segments) + Tavily (recent market reports) + specterSimilarCompanies (landscape sizing)
    - **competition**: specterSimilarCompanies (MUST call first) + specterEnrich on top 3 competitors + Cala (competitive positioning) + Tavily (recent competitive moves)
    - **traction**: specterCompanyPeople (MUST call first) + Cala (revenue, metrics, founder track record) + Tavily (recent news, product launches) + specterEnrich (verify claims)


    ## TASK

    1. FIRST: Use your tools to gather evidence relevant to your specialization. Make AT LEAST 5 tool calls total.
    2. THEN: Analyze the deal through the lens of YOUR specialization ONLY.

    Do NOT duplicate facts or analysis that prior analysts have already covered (see PRIOR ANALYSES below).
    Instead, build on their findings — reference gaps they flagged, challenge their assumptions, or add NEW facts.

    Every fact MUST cite evidence_ids from tool results. Record the evidence_id from each tool call result.


    ## DEAL INPUT

    {{deal_input}}


    ## FUND CONFIG

    {{fund_config}}


    ## COMPANY PROFILE (pre-enriched — use specter-* evidence_ids to cite)

    {{company_profile}}


    ## PRIOR ANALYSES (from other analysts — do NOT duplicate their work, build on it)

    {{prior_analyses}}


    ## HARD CONSTRAINTS

    - facts: array, MAX 12 items. Each: {"text": "...", "evidence_ids": ["eid-..."]}
      Every fact MUST cite at least one evidence_id from the tool results you gathered.
    - contradictions: array, MAX 8 items. Each: {"text": "...", "evidence_ids": ["eid-..."]}
    - unknowns: array, MAX 8 items. Each: {"question": "...", "why": "..."}
      Questions must be specific and testable. Do NOT ask questions already raised by prior analysts.
    - evidence_requests: array of follow-up queries. Each: {"query": "...", "reason": "..."}
    - NO narrative. NO summaries. Atomic structured items ONLY.


    ## OUTPUT FORMAT

    After gathering evidence with tools, respond with ONLY a JSON object:

    {
      "facts": [{"text": "string", "evidence_ids": ["string"]}],
      "contradictions": [{"text": "string", "evidence_ids": ["string"]}],
      "unknowns": [{"question": "string", "why": "string"}],
      "evidence_requests": [{"query": "string", "reason": "string"}]
    }

    No markdown fences. No explanation. Just the raw JSON object.
  prompt_type: simple
  retriever_resource:
    enabled: false
  sensitive_word_avoidance:
    configs: []
    enabled: false
    type: ''
  speech_to_text:
    enabled: false
  suggested_questions: []
  suggested_questions_after_answer:
    enabled: false
  text_to_speech:
    enabled: false
  user_input_form:
  - paragraph:
      default: ''
      label: Deal Input
      required: true
      variable: deal_input
  - paragraph:
      default: '{}'
      label: Fund Config
      required: false
      variable: fund_config
  - text-input:
      default: market
      label: Specialization
      required: true
      variable: specialization
  - text-input:
      default: analyst_1
      label: Analyst ID
      required: false
      variable: analyst_id
  - paragraph:
      default: ''
      label: Company Profile
      required: false
      variable: company_profile
  - paragraph:
      default: '[]'
      label: Prior Analyses
      required: false
      variable: prior_analyses
version: 0.5.0
