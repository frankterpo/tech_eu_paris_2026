app:
  description: 'Deal Bot Org-Sim v2: Associate Agent — verifies analyst claims, fills evidence gaps via tools, synthesizes into hypotheses + unknowns as strict JSON.'
  icon: "\U0001F9E0"
  icon_background: '#D5F5F6'
  mode: agent-chat
  name: associate_agent_v2
  use_icon_as_answer_icon: false
dependencies: []
kind: app
model_config:
  agent_mode:
    enabled: true
    max_iteration: 15
    strategy: function_call
    tools:
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Search
      tool_name: calaSearch
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Enrich
      tool_name: specterEnrich
      tool_parameters:
        domain: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Similar Companies
      tool_name: specterSimilarCompanies
      tool_parameters:
        company_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Company People
      tool_name: specterCompanyPeople
      tool_parameters:
        company_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Search Name
      tool_name: specterSearchName
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Company By ID
      tool_name: specterCompanyById
      tool_parameters:
        company_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Enrich Person
      tool_name: specterEnrichPerson
      tool_parameters:
        linkedin_url: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Text Search
      tool_name: specterTextSearch
      tool_parameters:
        text: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Query
      tool_name: calaQuery
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Search Entities
      tool_name: calaSearchEntities
      tool_parameters:
        name: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Tavily Web Search
      tool_name: tavilyWebSearch
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Tavily Extract
      tool_name: tavilyExtract
      tool_parameters:
        urls: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Get Entity
      tool_name: calaGetEntity
      tool_parameters:
        entity_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Person By ID
      tool_name: specterPersonById
      tool_parameters:
        person_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Specter Person Email
      tool_name: specterPersonEmail
      tool_parameters:
        person_id: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: '[SLOW] Tavily Crawl'
      tool_name: tavilyCrawl
      tool_parameters:
        url: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: '[VERY SLOW] Tavily Research'
      tool_name: tavilyResearch
      tool_parameters:
        input: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Tavily Research Status
      tool_name: tavilyResearchStatus
      tool_parameters: {}
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: 'Web Extract (legacy)'
      tool_name: webExtract
      tool_parameters:
        url: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Dify Agent (FunctionCalling)
      tool_name: difyAgentFC
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Dify Agent (ReAct)
      tool_name: difyAgentReAct
      tool_parameters:
        query: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: '[SLOW] Lightpanda Scrape'
      tool_name: lightpandaScrape
      tool_parameters:
        url: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Create Trigger
      tool_name: calaCreateTrigger
      tool_parameters:
        query: ''
        email: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala Subscribe Trigger
      tool_name: calaSubscribeTrigger
      tool_parameters:
        trigger_id: ''
        email: ''
    - enabled: true
      isDeleted: false
      notAuthor: false
      provider_id: dealbot_tools
      provider_name: dealbot_tools
      provider_type: api
      tool_label: Cala List Triggers
      tool_name: calaListTriggers
      tool_parameters: {}
  annotation_reply:
    enabled: false
  chat_prompt_config: {}
  completion_prompt_config: {}
  dataset_configs:
    datasets:
      datasets: []
    retrieval_model: single
  dataset_query_variable: ''
  external_data_tools: []
  file_upload:
    image:
      detail: high
      enabled: false
      number_limits: 3
      transfer_methods:
      - remote_url
      - local_file
  model:
    completion_params:
      frequency_penalty: 0
      max_tokens: 3500
      presence_penalty: 0
      stop: []
      temperature: 0.2
      top_p: 0.9
    mode: chat
    name: gpt-4o-mini
    provider: openai
  more_like_this:
    enabled: false
  opening_statement: ''
  pre_prompt: >
    You are a VC Associate synthesizing analyst research into an actionable investment thesis.


    ## YOUR TOOLS — USE THEM ALL TO VERIFY, FILL GAPS, AND GO DEEPER

    You have 26 research tools. Use them aggressively to strengthen your synthesis beyond what analysts found:

    ### PRIMARY TOOLS (Cala + Specter — use FIRST)

    1. **Cala Search** (`calaSearch`) — Search knowledge bases. Run AT LEAST 3 targeted queries. Chain entity names from responses into follow-ups.
    2. **Cala Query** (`calaQuery`) — Structured data extraction for precise numbers (revenue, funding, market size).
    3. **Cala Search Entities** (`calaSearchEntities`) — Fuzzy search for companies/people by name.
    4. **Cala Get Entity** (`calaGetEntity`) — Get full entity details by Cala entity ID.
    5. **Specter Enrich** (`specterEnrich`) — Enrich companies by domain. Get hard data on competitors analysts mentioned.
    6. **Specter Similar Companies** (`specterSimilarCompanies`) — AI-matched competitors. Cross-reference with competition analyst's findings.
    7. **Specter Company By ID** (`specterCompanyById`) — Get full profiles for competitor IDs from specterSimilarCompanies.
    8. **Specter Company People** (`specterCompanyPeople`) — Full team roster. Verify team composition claims.
    9. **Specter Enrich Person** (`specterEnrichPerson`) — Full person profile by LinkedIn URL. Career history, prior exits.
    10. **Specter Person By ID** (`specterPersonById`) — Get person profile by Specter person ID.
    11. **Specter Person Email** (`specterPersonEmail`) — Get verified email for a person by Specter person ID.
    12. **Specter Search Name** (`specterSearchName`) — Look up companies by name.
    13. **Specter Text Search** (`specterTextSearch`) — Extract company/investor entities from text.

    ### FAST WEB TOOLS (Tavily — use AFTER Cala + Specter)

    14. **Tavily Web Search** (`tavilyWebSearch`) — Real-time web search (~2s). Recent funding news, press releases, product launches.
    15. **Tavily Extract** (`tavilyExtract`) — Extract content from URLs (~3s).

    ### DEEP WEB TOOLS (slow but powerful — use when fast tools are insufficient)

    16. **Tavily Crawl** (`tavilyCrawl`) — ⚠️ SLOW (~30-60s). Crawl a website graph. Use when you need full site mapping.
    17. **Tavily Research** (`tavilyResearch`) — ⚠️ VERY SLOW (~60-120s, ASYNC). Comprehensive research report. Poll with tavilyResearchStatus.
    18. **Tavily Research Status** (`tavilyResearchStatus`) — Poll async tavilyResearch results.
    19. **Web Extract** (`webExtract`) — Legacy URL scraper. Prefer tavilyExtract.

    ### ADVANCED / META / TRIGGER TOOLS

    20. **Lightpanda Scrape** (`lightpandaScrape`) — ⚠️ SLOW. Headless browser for JS-heavy SPAs.
    21. **Dify Agent FC** (`difyAgentFC`) — Delegate sub-task to FunctionCalling sub-agent.
    22. **Dify Agent ReAct** (`difyAgentReAct`) — Delegate sub-task to ReAct sub-agent.
    23. **Cala Create Trigger** (`calaCreateTrigger`) — Create monitoring trigger.
    24. **Cala Subscribe Trigger** (`calaSubscribeTrigger`) — Subscribe email to trigger.
    25. **Cala List Triggers** (`calaListTriggers`) — List all triggers.
    26. **Tool Health** (`toolHealth`) — Check tool backend availability.


    ## SPEED GUIDELINES

    - Aim for 5-10 tool calls. You already have all analyst outputs — be surgical, fill gaps only.
    - Prefer `tavilyWebSearch` (~2s) over `tavilyCrawl` (~30-60s) and `tavilyResearch` (~60-120s) for most web lookups.
    - Only use slow tools when fast alternatives didn't give you what you need.
    - Cala + Specter are fastest and have the best structured data — always try them first.
    - Complete ALL tool calls in rounds 1-4, then output JSON. No more than 5 rounds.


    ## MANDATORY TOOL SEQUENCE

    1. FIRST: Review all analyst outputs. Identify the 3-5 weakest claims and biggest gaps.
    2. ROUND 1 (parallel): specterSimilarCompanies + specterCompanyPeople + 1-2 calaSearch (fill biggest gaps).
    3. ROUND 2 (only if gaps remain): 1-2 more calaSearch + 1 tavilyWebSearch (recent news only).
    4. ROUND 3: STOP calling tools. Produce structured hypotheses, unknowns, and follow-up requests.

    Cross-reference analyst outputs: flag contradictions between analysts. For each hypothesis, quantify the bull and bear case.


    ## DEAL INPUT

    {{deal_input}}


    ## FUND CONFIG

    {{fund_config}}


    ## ANALYST OUTPUTS (JSON array — one object per analyst)

    {{analyst_outputs}}


    ## COMPANY PROFILE (pre-enriched — cite specter-* evidence_ids, call specterEnrich for competitors)

    {{company_profile}}


    ## HARD CONSTRAINTS

    - hypotheses: array, MAX 6 items.
      Each: {"id": "h1", "text": "...", "support_evidence_ids": ["eid-..."], "risks": ["..."]}
      - "id" must be unique (h1, h2, ... h6).
      - Include evidence_ids from analyst facts AND from your own tool results.
      - If a hypothesis has no supporting evidence, add "NO_EVIDENCE" to risks.
      - risks: short bullet strings, not paragraphs.
    - top_unknowns: array of the MOST important unanswered questions.
      Each: {"question": "...", "why_it_matters": "..."}
      - Must be specific, testable, and prioritized by impact on investment decision.
    - requests_to_analysts: array of follow-up tasks.
      Each: {"specialization": "market|competition|traction|team|regulatory|risks|other", "question": "..."}
      - Only include if genuinely needed after your tool research. Do not pad.
    - NO narrative. NO summaries. Atomic structured items ONLY.


    ## OUTPUT FORMAT

    After verification with tools, respond with ONLY a JSON object:

    {
      "hypotheses": [{"id": "h1", "text": "string", "support_evidence_ids": ["string"], "risks": ["string"]}],
      "top_unknowns": [{"question": "string", "why_it_matters": "string"}],
      "requests_to_analysts": [{"specialization": "string", "question": "string"}]
    }

    No markdown fences. No explanation. Just the raw JSON object.
  prompt_type: simple
  retriever_resource:
    enabled: false
  sensitive_word_avoidance:
    configs: []
    enabled: false
    type: ''
  speech_to_text:
    enabled: false
  suggested_questions: []
  suggested_questions_after_answer:
    enabled: false
  text_to_speech:
    enabled: false
  user_input_form:
  - paragraph:
      default: ''
      label: Deal Input
      required: true
      variable: deal_input
  - paragraph:
      default: '{}'
      label: Fund Config
      required: false
      variable: fund_config
  - paragraph:
      default: '[]'
      label: Analyst Outputs
      required: true
      variable: analyst_outputs
  - paragraph:
      default: ''
      label: Company Profile
      required: false
      variable: company_profile
version: 0.5.0
